<mat-sidenav-container class="sidenav-container">
  <!-- Sidebar -->
  <mat-sidenav
    #drawer
    class="sidenav"
    fixedInViewport
    [mode]="(isHandset$ | async) ? 'over' : 'side'"
    [opened]="!(isHandset$ | async) && !sidebarCollapsed"
    [class.collapsed]="sidebarCollapsed">

    <!-- Sidebar Header -->
    <div class="sidebar-header">
      <div class="app-logo" [class.collapsed]="sidebarCollapsed">
        <mat-icon class="logo-icon">work</mat-icon>
        <span class="app-title" *ngIf="!sidebarCollapsed">SmartApply</span>
      </div>
    </div>

    <!-- Navigation Menu -->
    <mat-nav-list class="navigation-list">
      <ng-container *ngFor="let item of menuItems">

        <!-- Menu items with children (expandable) -->
        <div *ngIf="item.children && item.children.length > 0" class="menu-section">
          <mat-list-item
            class="nav-item parent-item"
            [class.active]="hasActiveChild(item)"
            [class.expanded]="item.expanded"
            (click)="toggleExpansion(item)">

            <mat-icon matListItemIcon
              [matTooltip]="sidebarCollapsed ? item.label : ''"
              matTooltipPosition="right">
              {{ item.icon }}
            </mat-icon>

            <span matListItemTitle *ngIf="!sidebarCollapsed">{{ item.label }}</span>

            <mat-icon
              matListItemMeta
              *ngIf="!sidebarCollapsed"
              class="expand-icon">
              {{ item.expanded ? 'expand_less' : 'expand_more' }}
            </mat-icon>
          </mat-list-item>

          <!-- Expandable children -->
          <div class="submenu" [class.expanded]="item.expanded && !sidebarCollapsed">
            <mat-list-item
              *ngFor="let child of item.children"
              class="nav-item child-item"
              [class.active]="child.route && isActive(child.route)"
              (click)="child.route && navigateTo(child.route)">

              <mat-icon matListItemIcon class="child-icon">{{ child.icon }}</mat-icon>
              <span matListItemTitle>{{ child.label }}</span>
            </mat-list-item>
          </div>
        </div>

        <!-- Simple menu items (no children) -->
        <mat-list-item
          *ngIf="!item.children || item.children.length === 0"
          class="nav-item"
          [class.active]="item.route && isActive(item.route)"
          (click)="item.route && navigateTo(item.route)">

          <mat-icon matListItemIcon
            [matTooltip]="sidebarCollapsed ? item.label : ''"
            matTooltipPosition="right">
            {{ item.icon }}
          </mat-icon>

          <span matListItemTitle *ngIf="!sidebarCollapsed">{{ item.label }}</span>
        </mat-list-item>

      </ng-container>
    </mat-nav-list>

    <!-- Sidebar Footer -->
    <div class="sidebar-footer" *ngIf="!sidebarCollapsed">
      <div class="user-info">
        <mat-icon>account_circle</mat-icon>
        <span>Felhasználó</span>
      </div>
    </div>

  </mat-sidenav>

  <!-- Main Content Area -->
  <mat-sidenav-content class="main-content">

    <!-- Top Toolbar -->
    <mat-toolbar color="primary" class="top-toolbar">
      <!-- Menu toggle button -->
      <button
        type="button"
        mat-icon-button
        (click)="toggleMenuButton()">
        <mat-icon>menu</mat-icon>
      </button>

      <span class="toolbar-spacer"></span>

      <!-- Right side toolbar buttons -->
      <button mat-icon-button>
        <mat-icon>notifications</mat-icon>
      </button>

      <button mat-icon-button>
        <mat-icon>account_circle</mat-icon>
      </button>
    </mat-toolbar>

    <!-- Router Content -->
    <div class="content-wrapper">
      <router-outlet></router-outlet>
    </div>

  </mat-sidenav-content>
</mat-sidenav-container>
