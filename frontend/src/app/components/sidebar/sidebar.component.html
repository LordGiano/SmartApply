<!-- Sidebar Container -->
<mat-drawer-container class="sidenav-container" autosize>
  <!-- Sidebar -->
  <mat-drawer #drawer class="sidenav" [class.collapsed]="sidebarCollapsed" mode="side" opened>
    <!-- Sidebar Header -->
    <div class="sidebar-header">
      <div class="logo-container" [class.collapsed]="sidebarCollapsed">
        <div class="logo-icon">
          <mat-icon>work_outline</mat-icon>
        </div>
        <span class="logo-text">SmartApply</span>
      </div>
    </div>

    <!-- Navigation Menu -->
    <nav class="navigation-list">
      <div class="menu-section" *ngFor="let item of menuItems">
        <!-- Parent Item or Simple Item -->
        <div class="nav-item" [class.has-submenu]="item.children" [class.expanded]="item.expanded">
          <a
            class="nav-link"
            [class.parent-item]="item.children"
            [class.active]="!item.children && isActive(item.route || '')"
            [class.expanded]="item.expanded && item.children"
            (click)="item.children ? toggleExpansion(item) : navigateTo(item.route || '')"
            [attr.href]="item.children ? null : '#'"
          >
            <mat-icon class="nav-icon">{{ item.icon }}</mat-icon>
            <span class="nav-text">{{ item.label }}</span>
            <mat-icon class="expand-icon" *ngIf="item.children && !sidebarCollapsed">
              {{ item.expanded ? 'expand_less' : 'expand_more' }}
            </mat-icon>
          </a>

          <!-- Submenu Items -->
          <div class="submenu" [class.expanded]="item.expanded" *ngIf="item.children && !sidebarCollapsed">
            <a
              *ngFor="let child of item.children"
              class="nav-link child-item"
              [class.active]="isActive(child.route || '')"
              (click)="navigateTo(child.route || '')"
            >
              <mat-icon class="child-icon">{{ child.icon }}</mat-icon>
              <span class="nav-text">{{ child.label }}</span>
            </a>
          </div>
        </div>
      </div>
    </nav>

    <!-- Sidebar Footer -->
    <div class="sidebar-footer">
      <div class="user-info">
        <mat-icon>account_circle</mat-icon>
        <span class="user-name" *ngIf="!sidebarCollapsed">Felhasználó</span>
      </div>
    </div>
  </mat-drawer>

  <!-- Main Content Area -->
  <mat-drawer-content class="main-content">
    <!-- Top Toolbar -->
    <mat-toolbar class="top-toolbar">
      <button mat-icon-button (click)="toggleMenuButton()" class="menu-toggle">
        <mat-icon>menu</mat-icon>
      </button>

      <!-- Search Bar -->
      <div class="search-container" *ngIf="!(isHandset$ | async)">
        <mat-icon class="search-icon">search</mat-icon>
        <input type="text" placeholder="Keresés..." class="search-input">
      </div>

      <span class="toolbar-spacer"></span>

      <!-- Toolbar Actions -->
      <button mat-icon-button class="toolbar-icon">
        <mat-icon matBadge="3" matBadgeColor="warn" matBadgeSize="small">notifications</mat-icon>
      </button>

      <button mat-icon-button class="toolbar-icon">
        <mat-icon>mail</mat-icon>
      </button>

      <button mat-icon-button class="toolbar-icon">
        <mat-icon>settings</mat-icon>
      </button>
    </mat-toolbar>

    <!-- Content Wrapper -->
    <div class="content-wrapper">
      <router-outlet></router-outlet>
    </div>
  </mat-drawer-content>
</mat-drawer-container>
